(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4699:function(e,t){"use strict";t.byteLength=function(e){var t=i(e),r=t[0],n=t[1];return(r+n)*3/4-n},t.toByteArray=function(e){var t,r,a=i(e),l=a[0],s=a[1],c=new o((l+s)*3/4-s),u=0,h=s>0?l-4:l;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===s&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[u++]=255&t),1===s&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,a=[],l=0,s=n-o;l<s;l+=16383)a.push(function(e,t,n){for(var o,a=[],l=t;l<n;l+=3)a.push(r[(o=(e[l]<<16&16711680)+(e[l+1]<<8&65280)+(255&e[l+2]))>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}(e,l,l+16383>s?s:l+16383));return 1===o?a.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===o&&a.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),a.join("")};for(var r=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,s=a.length;l<s;++l)r[l]=a[l],n[a.charCodeAt(l)]=l;function i(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},576:function(e,t,r){Promise.resolve().then(r.bind(r,1828))},1828:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var n,o,a,l=r(7437),s=r(2265),i=Object.defineProperty,c=r(4699),u=class{specialTokens;inverseSpecialTokens;patStr;textEncoder=new TextEncoder;textDecoder=new TextDecoder("utf-8");rankMap=new Map;textMap=new Map;constructor(e,t){this.patStr=e.pat_str;let r=e.bpe_ranks.split("\n").filter(Boolean).reduce((e,t)=>{let[r,n,...o]=t.split(" "),a=Number.parseInt(n,10);return o.forEach((t,r)=>e[t]=a+r),e},{});for(let[e,t]of Object.entries(r)){let r=c.toByteArray(e);this.rankMap.set(r.join(","),t),this.textMap.set(t,r)}this.specialTokens={...e.special_tokens,...t},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((e,[t,r])=>(e[r]=this.textEncoder.encode(t),e),{})}encode(e,t=[],r="all"){let n=RegExp(this.patStr,"ug"),o=u.specialTokenRegex(Object.keys(this.specialTokens)),a=[],l=new Set("all"===t?Object.keys(this.specialTokens):t),s=new Set("all"===r?Object.keys(this.specialTokens).filter(e=>!l.has(e)):r);if(s.size>0){let t=u.specialTokenRegex([...s]),r=e.match(t);if(null!=r)throw Error(`The text contains a special token that is not allowed: ${r[0]}`)}let i=0;for(;;){let t=null,r=i;for(;o.lastIndex=r,!(null==(t=o.exec(e))||l.has(t[0]));)r=t.index+1;let s=t?.index??e.length;for(let t of e.substring(i,s).matchAll(n)){let e=this.textEncoder.encode(t[0]),r=this.rankMap.get(e.join(","));if(null!=r){a.push(r);continue}a.push(...function(e,t){return 1===e.length?[t.get(e.join(","))]:(function(e,t){let r=Array.from({length:e.length},(e,t)=>({start:t,end:t+1}));for(;r.length>1;){let n=null;for(let o=0;o<r.length-1;o++){let a=e.slice(r[o].start,r[o+1].end),l=t.get(a.join(","));null!=l&&(null==n||l<n[0])&&(n=[l,o])}if(null!=n){let e=n[1];r[e]={start:r[e].start,end:r[e+1].end},r.splice(e+1,1)}else break}return r})(e,t).map(r=>t.get(e.slice(r.start,r.end).join(","))).filter(e=>null!=e)}(e,this.rankMap))}if(null==t)break;let c=this.specialTokens[t[0]];a.push(c),i=t.index+t[0].length}return a}decode(e){let t=[],r=0;for(let n=0;n<e.length;++n){let o=e[n],a=this.textMap.get(o)??this.inverseSpecialTokens[o];null!=a&&(t.push(a),r+=a.length)}let n=new Uint8Array(r),o=0;for(let e of t)n.set(e,o),o+=e.length;return this.textDecoder.decode(n)}};n="symbol"!=typeof(a="specialTokenRegex")?a+"":a,o=e=>RegExp(e.map(e=>e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")).join("|"),"g"),n in u?i(u,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):u[n]=o;var h=r(1835),d=r(2003),p=r(770),f=r(9823),g=r(7866);function k(){let[e,t]=(0,s.useState)(""),[r,n]=(0,s.useState)(0),o=(e,t)=>{let r=function(e,t){switch(e){case"gpt2":return new u(d.X,t);case"r50k_base":return new u(g.G,t);case"p50k_base":return new u(p.x,t);case"p50k_edit":return new u(f.n,t);case"cl100k_base":return new u(h.z,t);default:throw Error("Unknown encoding")}}(t),n=r.encode(e);return n.length};return(0,l.jsxs)("main",{style:{background:"var(--gray-1)",color:"var(--gray-12)"},className:"flex min-h-screen flex-col items-center p-24",children:[(0,l.jsxs)("div",{className:"flex gap-8 items-center",children:[(0,l.jsx)("button",{className:"px-4 py-2 rounded-md border border-neutral-400 hover:border-neutral-300",onClick:()=>{n(o(e,"cl100k_base"))},children:"Count"}),(0,l.jsxs)("p",{children:["Token Count: ",r]})]}),(0,l.jsx)("div",{className:"h-8"}),(0,l.jsx)("textarea",{placeholder:"Paste your prompt here...",className:"h-96 w-full p-8 rounded-md border border-neutral-400",style:{background:"var(--gray-3)"},value:e,onChange:e=>t(e.target.value)})]})}},622:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(2265),o=Symbol.for("react.element"),a=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function i(e,t,r){var n,i={},c=null,u=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,n)&&!s.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:o,type:e,key:c,ref:u,props:i,_owner:l.current}}t.jsx=i,t.jsxs=i},7437:function(e,t,r){"use strict";e.exports=r(622)}},function(e){e.O(0,[633,514,546,899,943,971,596,744],function(){return e(e.s=576)}),_N_E=e.O()}]);